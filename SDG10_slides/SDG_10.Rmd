---
title: "SDG 10"
output:
  xaringan::moon_reader:
    seal: false
    css: ["css/sfah.css", "css/fonts.css", "default"]
    self_contained: false
    lib_dir: libs
    mathjax: "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_HTMLorMML"
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: "16:9"
      titleSlideClass: ["left", "middle", "inverse"]
---
```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
library(knitr)
library(data.tree)

knitr::opts_chunk$set(
  warning = FALSE,
  collapse = TRUE,
  message = FALSE,
  echo = FALSE,
  fig.retina = 3,
  fig.width = 10
)
knitr::opts_knit$set(
  root.dir = ".."
)
# options(knitr.table.format = "html")
library(fontawesome) # from github: https://github.com/rstudio/fontawesome

```

class: inverse, right, bottom
## SDG Atlas 2020

## Goal 10: Reduce inequality within and among countries

---
```{r ginichange}
source("R/SDG_10_Gini_Change.R")

```

class: center, middle

## .saltinline[What can we say about Global inequality during the last 15 or 20 years?]

--

### .saltinline[Has it gone up or down?]

---
class: center, middle

## .fatinline[Not an easy answer]

--

### .fatinline[In contrast to poverty, inequality measures, Gini in particular, are not additive decomposable. That is, the average of Ginis is not equal to the total Gini.]

---

## .acidinline[Total Gini]

.big[If I pull the welfare aggregates of all the countries and calculate a global Gini as if it were a single country, what does that tell me?]
--

.big[It does not say much because whether it goes up or down over time, I have no way to explain that movement:]

--
.big[
- The distributional changes across countries may cancel each other 
- The welfare between countries is not comparable (e.g., cons and income)
- I can't see where the action is happening. 
- **There is no data available to create a representative set of countries in any year to build a comparable trend of global inequality over time**]
---
## .acidinline[Average of Ginis]

--
.big[This should be simple, it is just estimating how inequality, in average, has moved over time]

--

.big[It is not that simple because, 
- Again, we don't have data for all the countries in all the years, so any two sets of countries in two years will be different to each other. 
- Lackner et. al (2019) found no more than 43 countries with which we could calculate an average of the Ginis over time, but that set is not representative of the whole world.
]
---
class: center, middle
## .saltinline[So, If we want a simple measure of global inequality, how can we overcome the problem of lack of data?]

--

.big[.heat[We could interpolate ] `r emo::ji("+1")`]

---
.left-column[
.big[.acidinline[Without interpolation]]

By using **only** available data, the *average* Gini coefficient decreased steadly from the mid 90's to 2010. Since then, the trend reverted and the average inequality is increasing rapidly.
]

.right-column[
```{r giniav-noint}
p_av_g +
  geom_vline(xintercept = c(1996, 2010, 2013),
             color = "gray70")
```
]

---
.left-column[
.big[.acidinline[With interpolation]]

However, when we interpolate linearly to account for countries with missing data in some years but with at least two data points five years appart, the story changes. 
]

.right-column[
```{r giniav}
p_av_g_int +
  geom_vline(xintercept = c(1996, 2010, 2013),
             color = "gray70")
```
]

---

class: center, middle
## .saltinline[Ok, if I can't say anything about global inequality in general, can I say something about the countries?]

--

### .saltinline[can we know which countries are the most unequal?]

--

### .saltinline[can we know how has inequality evolved in each country?]

---
class: center, middle

## .heatinline[Of course! we can answer that]

---

## .heatinline[but...]

--

.big[
- It is not exciting
- It has already been done
- It's about it. There's no much we can say
]

--

.center[.heat[Let's see it]]
---

.left-column[
.big[.acidinline[Gini coef. by country in circa 2000-2018]]
Here we have all the countries of the world and their corresponding Gini coefficient of the closest year to 2000 and 2018. 
]
.right-column[
```{r gini45}
p_g
```
]

---

.left-column[
.big[.acidinline[Gini coef. by country in circa 2000-2018 (LAC)]]
LAC is the region that consistently has reduced inequality in most countries. This makes sense because inequality is measured with income-based welfare, which is by definition higher than consumption-based welfare,  so there is more room to improve.
]
.right-column[
```{r gini45lac}
p_g +
  ggforce::geom_mark_hull(
    aes(filter = region == 'LAC',
        fill = region,
        label = region),
    show.legend = FALSE,
    expand = unit(2, "mm"),
    concavity = 1
  )
``` 
]

---
.left-column[
.big[.acidinline[Gini coef. by country in circa 2000-2018 (SSA)]]
When we look at other regions, we don't find the same patterns.
]
.right-column[
```{r gini45SSA}
p_g +
  ggforce::geom_mark_hull(
    aes(filter = region == 'SSA',
        fill = region,
        label = regionname),
    show.legend = FALSE,
    expand = unit(2, "mm"),
    concavity = 1
  )
```
]

---
.left-column[
.big[.acidinline[Gini coef. by country in circa 2000-2018 (EAP)]]
When we look at other regions, we don't find the same patterns.
]
.right-column[
```{r gini45EAP}

p_g +
  ggforce::geom_mark_hull(
    aes(filter = region == 'EAP',
        fill = region,
        label = regionname),
    show.legend = FALSE,
    expand = unit(2, "mm"),
    concavity = 1
  )
```
]
---

class: center, middle

## .heatinline[We could highlight by income groups instead]

---
.left-column[
.big[.acidinline[Gini coef. by country in circa 2000-2018 (Low income)]]
]
.right-column[
```{r gli}
p_g_i +
  ggforce::geom_mark_hull(
    aes(filter = incomegroup == 'Low income',
        fill = incomegroup,
        label = incomegroup),
    show.legend = FALSE,
    expand = unit(2.5, "mm"),
    concavity = 1)

```
]

---

.left-column[
.big[.acidinline[Gini coef. by country in circa 2000-2018 (Lower middle income)]]
]
.right-column[
```{r glmi}
p_g_i +
  ggforce::geom_mark_hull(
    aes(filter = incomegroup == 'Lower middle income',
        fill = incomegroup,
        label = incomegroup),
    show.legend = FALSE,
    expand = unit(2.5, "mm"),
    concavity = 1)

```
]

---

.left-column[
.big[.acidinline[Gini coef. by country in circa 2000-2018 (Upper middle income)]]
]
.right-column[
```{r gumi}
p_g_i +
  ggforce::geom_mark_hull(
    aes(filter = incomegroup == 'Upper middle income',
        fill = incomegroup,
        label = incomegroup),
    show.legend = FALSE,
    expand = unit(2.5, "mm"),
    concavity = 1)

```
]

---

.left-column[
.big[.acidinline[Gini coef. by country in circa 2000-2018 (High income)]]
]
.right-column[
```{r ghi}

p_g_i +
  ggforce::geom_mark_hull(
    aes(filter = incomegroup == 'High income',
        fill = incomegroup,
        label = incomegroup),
    show.legend = FALSE,
    expand = unit(2.5, "mm"),
    concavity = 2)

```
]

